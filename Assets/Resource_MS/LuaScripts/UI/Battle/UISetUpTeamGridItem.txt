---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by liuyubao.
--- DateTime: 2022/1/19 11:06
---@class UISetUpTeamGridItem
local UISetUpTeamGridItem = SimpleClassUtil:class()
---@param battleTeam BattleTeam
function UISetUpTeamGridItem:initialize(index,pos,type,go_parent,isNull)
    self._type = type
    self._index = index
    self._pos = Vector3_CS(pos[1],pos[2],pos[3])
    self._isNull = isNull
    self._heroUid = nil
    self._go_parent = go_parent
    self:traLoad()
end

function UISetUpTeamGridItem:traLoad()
    local path = "Assets/Resource_MS/Prefabs/Scenes/setUpGridItem.prefab"
    BattleLoaderManager:pop(path,Enum_Battle.BattleAssetType.Effect,function(effGo)
        self._go_root = effGo
        self._go_root.transform:SetParent(self._go_parent.transform)
        self._go_root.transform.localScale = Vector3_CS.one
        self._go_root.transform.localPosition = self._pos

        self._go_light = self._go_root.transform:Find("lightFrame").gameObject
        self._go_dark = self._go_root.transform:Find("darkFrame").gameObject

        self:setBottomFrameActive()
    end)
end

function UISetUpTeamGridItem:setBottomFrameActive()
    if self._go_light then
        self._go_light:SetActiveVirtual(self._isNull)
    end
    if self._go_dark then
        self._go_dark:SetActiveVirtual(not self._isNull)
    end
end

function UISetUpTeamGridItem:put(heroUid)
    self._heroUid = heroUid
    self._isNull = false
    self:setBottomFrameActive()
end

function UISetUpTeamGridItem:pop()
    self._heroUid = nil
    self._isNull = true
    self:setBottomFrameActive()
end

function UISetUpTeamGridItem:OnDestroy()
  -- todo 停止上述加载操作
    if self._go_root then
        CS.UnityEngine.GameObject.Destroy(self._go_root)
    end
end

return UISetUpTeamGridItem