--界面
UISetUpTeamLUA=LUAUIBase:new({
	
	});

function UISetUpTeamLUA:Open(param)
	self:AddUIEventListener()
	self:AddEventListener()
	self:Init(param);
end
function UISetUpTeamLUA:Init(param)
    self._teamYpe = param.openType
	self._data = param.data
	---@type SetUpTeamNode
	self._node = param.node

	self:initComponent()
end

--ui组件添加事件
function UISetUpTeamLUA:AddUIEventListener( )
	self:AddUIEvent("onclick", self.btn_close.gameObject, self.OnCloseClick);
	self:AddUIEvent("onclick", self.btn_battle.gameObject, self.OnBattleClick)
end
--模块添加全局事件
function UISetUpTeamLUA:AddEventListener( )
	-- self:AddEvent("EventStringKey", self.EventHandle);
end
--模块移除全局事件
function UISetUpTeamLUA:RemoveEventListener( )
	-- self:RemoveEvent("EventStringKey", self.EventHandle);
end

function UISetUpTeamLUA:OnCloseMe()
	if(self.view~=nil)then
		if(self.view.isUIMonoItem)then
			self:RemoveItem(self);
		else
			self:CloseUI("UISetUpTeam")
		end
	end
end
function UISetUpTeamLUA:OnDestroy()
	self:RemoveEventListener()
	UISetUpTeamLUA = nil;
end

function UISetUpTeamLUA:OnBattleClick()
	-- todo 保存战斗阵型
	--EventManager:Dispatch(EventType.Event_GoBattle)
	--self:OnCloseMe()
	self._node:onLeave()
end

function UISetUpTeamLUA:OnCloseClick()
	-- todo 关闭
	--EventManager:Dispatch(EventType.Event_CloseSetUpView)
	self:OnCloseMe()
	BattleProxy:ExitBattle()
end

function UISetUpTeamLUA:initComponent()
    self._clazz_left = self:getTopClazz(Enum.SetUpTeamEnum.TeamPos.left,self.btn_relation_l, self.img_relation_t_l,
			self.img_relation_l_l,self.img_relation_c_l,self.img_relation_r_l,self.img_relation_b_l)
	self._clazz_left = self:getTopClazz(Enum.SetUpTeamEnum.TeamPos.right,self.btn_relation_r, self.img_relation_t_r,
			self.img_relation_l_r,self.img_relation_c_r,self.img_relation_r_r,self.img_relation_b_r)

	self._list_heroList:InitListLua(self, {} ,"")
end

function UISetUpTeamLUA:getTopClazz(type,btn_relation,img_t,img_l,img_c,img_r,img_b)
	local tmp = {}
	tmp._type = type
	tmp._btn_relation = btn_relation
	tmp._img_t = img_t
	tmp._img_l = img_l
	tmp._img_c = img_c
	tmp._img_r = img_r
	tmp._img_b = img_b
	self:AddUIEvent("onclick", tmp._btn_relation.gameObject, function()
		self:onClickRelation(tmp._type)
	end)
end

function UISetUpTeamLUA:onClickRelation(type)
   Logger.error("onClickRelation :: type = ",type)
end
return UISetUpTeamLUA