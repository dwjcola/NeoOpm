---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by liuyubao.
--- DateTime: 2021/12/23 15:05
---@class BattleEntityContext:SimpleClassUtil
local BattleEntityContext = SimpleClassUtil:class()
function BattleEntityContext:initialize()

end
---@param battleManager PVE_Config_Battle_Manager
function BattleEntityContext:init(baseBlackBoard,battleData,battleManager)

    self._baseBlackBoard = baseBlackBoard

    self._battleManager = battleManager

    self._battleData = battleData

    self._list_camp = battleManager._list_logicCharacter

    self:initCharacters()
end



function BattleEntityContext:initCharacters()
    for i, characterList in pairs(self._list_camp) do
        for pos, character in pairs(characterList) do
            ---@type BattleCharacter
            character:init(self)
        end
    end

end

function BattleEntityContext:update(dt)
    for camp, _campList in pairs(self._list_camp) do
        for index_pos, character in pairs(_campList) do
            if character and character.update then
                character:update(dt)
            end
        end
    end
end

function BattleEntityContext:getEnemyCamp(camp)
    if camp == Enum_Battle.Camp.CampSelf then
        return  Enum_Battle.Camp.CampEnemy
    else
        return  Enum_Battle.Camp.CampSelf
    end
end

function BattleEntityContext:getEntityListByCamp(camp)
   return self._list_camp[camp] or {}
end
---@return BattleCharacter[]
function BattleEntityContext:getEnemyEntityList(camp)
    local enemyCamp = self:getEnemyCamp(camp)
    return self:getEntityListByCamp(enemyCamp)
end

function BattleEntityContext:getSelfEntityByIndex(camp,index)
    return self:getEntityListByCamp(camp)[index]
end

function BattleEntityContext:getEnemyEntityByIndex(camp,index)
    return self:getEnemyEntityList(camp)[index]
end

return BattleEntityContext