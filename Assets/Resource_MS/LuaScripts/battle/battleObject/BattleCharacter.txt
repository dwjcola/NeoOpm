---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by liuyubao.
--- DateTime: 2021/12/29 11:39
---@class BattleCharacter:SimpleClassUtil
local BattleCharacter = SimpleClassUtil:class()

function BattleCharacter:initialize(campType,index,battleManager,entityContext,heroData,uid)

    self._campType = campType

    self._index_pos = index

    self._battleManager = battleManager

    self._entityContext = entityContext

    self._heroData = heroData

    self._heroId = heroData.heroId

    self._uid = uid
    --BattleLog.error( self._heroId)
    self:init()



end

function BattleCharacter:init()
    local rlist = {6,1}
    local skill_5 = SkillData:new()
    skill_5._skill_r = rlist[math.random(1,2)]
    skill_5._skillType = Enum_Battle.SkillTag.Skill_5
    skill_5._skill_time_cd = 0

    local data = {
        _heroId =  self._heroData.heroId,
        _hp = 1000,
        _campType = self._campType,
        _index_pos = self._index_pos,
        _position = BattleUtils:posMapToVec3(BattleUtils:getPositionByIndex(self._campType == Enum_Battle.Camp.CampSelf,self._index_pos)),
        _alive = true,
        _anger = 0,
        _isUnPutSkill = false,
        _smallSkillIng = false,
        _bigSkillReady = false,
        _isKeyDownBigSkill = false,
        _uid = self._uid,
        _moveSpeed = 0.5,
        _skillData = {
           [Enum_Battle.SkillTag.Skill_5] = skill_5
        },
        _volume_r = 1,
        _place_r = 1,
        _dislocation_r = 1,
        _detection_r = 2,
    }

    local agent = {
        _battleManager =  self._battleManager,
        _entityContext = self._entityContext
    }

    self._logicTree = BehaviourTreeEntity:new({},data,agent)
end

function BattleCharacter:getData()
    if self._logicTree and self._logicTree._blackboard then
        return self._logicTree._blackboard
    else
        return {}
    end
end

function BattleCharacter:update(dt)
    if  self._logicTree then
        self._logicTree:execute(dt)
    end
end


return BattleCharacter