---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by liuyubao.
--- DateTime: 2021/12/29 11:39
---@class BattleCharacter:SimpleClassUtil
local BattleCharacter = SimpleClassUtil:class()
---@param battleManager PVE_Config_Battle_Manager
function BattleCharacter:initialize(param,battleManager)

    self._param = param
    self._campType = param._campType

    self._index_pos = param._index_pos

    self._battleManager = battleManager

    --self._entityContext = battleManager._world_logic._battleLogicContext._entityContext



    self._heroId = param._heroId

    self._heroUid = param._heroUid

    self._uid = param._uid


end

function BattleCharacter:init(entityContext)
    self._entityContext = entityContext
    self:initTree()
end

function BattleCharacter:initTree()

    local agent = {
        _battleManager =  self._battleManager,
        _entityContext = self._entityContext
    }

    self._logicTree = BehaviourTreeEntity:new({}, self._param,agent)
    self:debugSetting( self._param._volume_r,self._param._place_r,self._param._dislocation_r,
            self._param._detection_r,0.2,self._param._place_r)
end

function BattleCharacter:debugSetting(volume_r,place_r,dislocation_r,detection_r,attack_r,place_r_base)
    if GameStatic_Battle.General_Grizmo then
        local data = {uid = self._uid,
                      volume_r = volume_r,
                      place_r = place_r,
                      dislocation_r = dislocation_r,
                      detection_r = detection_r,
                      attack_r =attack_r,
                      place_r_base = place_r_base}
        EventManager:Dispatch_battle(EventType.Event_Battle_Render_Debug_GizmosCircle,data)
    end

end

function BattleCharacter:getData()
    if self._logicTree and self._logicTree._blackboard then
        return self._logicTree._blackboard
    else
        return {}
    end
end

function BattleCharacter:update(dt)
    if  self._logicTree then
        self._logicTree:execute(dt)
    end
end


return BattleCharacter