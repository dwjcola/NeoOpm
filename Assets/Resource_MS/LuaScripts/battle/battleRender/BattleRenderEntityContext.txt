---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by liuyubao.
--- DateTime: 2021/12/30 17:46
---@class BattleRenderEntityContext
local BattleRenderEntityContext = SimpleClassUtil:class()

function BattleRenderEntityContext:initialize(data)

end
---@param battleManager PVE_Config_Battle_Manager
function BattleRenderEntityContext:init(baseBlackBoard,battleData,battleManager)

    self._baseBlackBoard = baseBlackBoard

    self._battleManager = battleManager

    self._battleData = battleData

    self._list_camp = {
        [Enum_Battle.Camp.CampSelf] = {},
        [Enum_Battle.Camp.CampEnemy] = {},
    }

     self:initCharacters(self._battleManager._battleTeam)
end
---@param battleTeam BattleTeam
function BattleRenderEntityContext:initCharacters(battleTeam)
    local data = self._battleData
    for i, v in pairs(data.team_self.teamMap) do
        local character = BattleRenderCharacter:new({
            go_model = battleTeam._map_left_role[i].model,
            index = i,
            heroId = v.heroId,
        })
        self._list_camp[Enum_Battle.Camp.CampSelf][tonumber(i)] = character
    end
    for i, v in pairs(data.team_enemy.teamMap) do
        local character = BattleRenderCharacter:new({
            go_model = battleTeam._map_right_role[i].model,
            index = i,
            heroId = v.heroId,
        })
        self._list_camp[Enum_Battle.Camp.CampEnemy][tonumber(i)] = character
    end
end

function BattleRenderEntityContext:update(dt)
    for camp, _campList in pairs(self._list_camp) do
        for index_pos, character in ipairs(_campList) do
            if character and character.update then
                character:update(dt)
            end
        end
    end
end

return BattleRenderEntityContext