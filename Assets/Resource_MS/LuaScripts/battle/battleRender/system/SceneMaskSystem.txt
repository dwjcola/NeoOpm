---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by liuyubao.
--- DateTime: 2021/12/30 16:22
---@class SceneMaskSystem:ISystem
local SceneMaskSystem = SimpleClassUtil:class(ISystem)

function SceneMaskSystem:initialize()
    ISystem.initialize(self)
end

function SceneMaskSystem:getEventHandleMap()
    return {
        [EventType.Event_Battle_BlackOut] = "blackoutHandle",
    }
end

function SceneMaskSystem:blackoutHandle(data)
    for i, entity in pairs(self._entityMap) do
        if entity then
            local go_mask = entity:getRoleMask()
            if go_mask then
                go_mask:SetActiveVirtual(data.openType == Enum_Battle.SkillBlackOut.Open)
            end
        end
    end
end


return SceneMaskSystem