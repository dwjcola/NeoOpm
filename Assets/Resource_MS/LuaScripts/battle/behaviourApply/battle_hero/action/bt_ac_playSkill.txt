---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by lyb.
--- DateTime: 2021/12/8 0:03
--- 叶子节点
---@class bt_ac_playSkill : IAction
local bt_ac_playSkill = SimpleClassUtil:class(IAction)

function bt_ac_playSkill:initData(data)
    self._skillTag = data.skillTag
    self._heroId = data.heroId
    self._skillFrameList = BattleUtils:getSkillFrameList(data.heroId,data.skillTag)
    self._frameCount = 0
    self._maxFrameCount = 60
end

function bt_ac_playSkill:doAction(blackBoard,contextManager)
    self._frameCount =  self._frameCount + 1
    if self._frameCount > self._maxFrameCount then
        self._frameCount = 0
        return Enum_BT.Node_ResultType.Success
    else
        local frameInfo = self._skillFrameList[self._frameCount]
        if frameInfo then
            if frameInfo.attackType == 1 then
                EventManager:Dispatch_battle(EventType.Event_Battle_Attack_Hp,{})
            end
        end
        return Enum_BT.Node_ResultType.Running
    end
end

return bt_ac_playSkill