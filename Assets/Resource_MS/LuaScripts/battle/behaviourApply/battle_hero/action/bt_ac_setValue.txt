---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by lyb.
--- DateTime: 2021/12/8 0:03
--- 叶子节点
---@class bt_ac_setValue : IAction
local bt_ac_setValue = SimpleClassUtil:class(IAction)

function bt_ac_setValue:initData(data)
    self._key = data.key
    self._value = data.value
    self._setValueType = data.setValueType or Enum_BT.SetValueType.Bt_Equal
end
---@param blackBoard BlackBoard_BattleBase
function bt_ac_setValue:doAction(blackBoard,contextManager)
    if blackBoard then
        if self._setValueType == Enum_BT.SetValueType.Bt_Equal then
            blackBoard:setValue(self._key,self._value)
        elseif self._setValueType == Enum_BT.SetValueType.BT_AddEqual then
            local result = blackBoard[self._key]  or 0
            result =  result + self._value
            blackBoard:setValue(self._key,result)
        elseif self._setValueType == Enum_BT.SetValueType.BT_MinusEqual then
            local result = blackBoard[self._key]  or 0
            result =  result - self._value
            blackBoard:setValue(self._key,result)
        elseif self._setValueType == Enum_BT.SetValueType.BT_MultiplyEqual then
            local result = blackBoard[self._key]  or 0
            result =  result * self._value
            blackBoard:setValue(self._key,result)
        elseif self._setValueType == Enum_BT.SetValueType.BT_DivisionEqual then
            if self._value ~= 0 then
                local result = blackBoard[self._key]  or 0
                result =  result / self._value
                blackBoard:setValue(self._key,result)
            else
                BattleLog.error("self._value 不能等于 0 ")
            end
        else
            BattleLog.error("未处理赋值类型 ： ",self._setValueType)
        end
    end
    return Enum_BT.Node_ResultType.Success
end

return bt_ac_setValue