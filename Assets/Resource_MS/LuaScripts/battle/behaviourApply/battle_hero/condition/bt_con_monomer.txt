---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by liuyubao.
--- DateTime: 2021/12/24 10:52
--- 单体目标需寻找
---@class bt_con_monomer:ICondition
local bt_con_monomer = SimpleClassUtil:class(ICondition)

function bt_con_monomer:initData(data)
    self._skillTag = data.skillTag
    self._skillDistance = data.skillDistance
    self._3d_skillDistance = data.skillDistance * 0.1
end
---@param blackBoard BlackBoard_BattleBase
---@param agent PVE_Config_Battle_Manager
function bt_con_monomer:doCondition(blackBoard,agent)
    local result = Enum_BT.Node_ResultType.Fail
    local self_pos = blackBoard._position
    ---@type BattleEntityContext
    local _entityContext = agent._entityContext
    local _enemyList = _entityContext:getEnemyEntityList(blackBoard._campType)
    for i, character in pairs(_enemyList) do
        ---@type BlackBoard_BattleBase
        local enemy_blackBoard =  character._logicTree._blackboard
        if enemy_blackBoard._alive and enemy_blackBoard._isCanBeSelected then
            local dic = Vector3.Distance(self_pos,enemy_blackBoard._position)
            if dic <= self._3d_skillDistance then
                result =  Enum_BT.Node_ResultType.Success
                break
            end
        end
    end
    self:log("bt_con_monomer   ",result)
    return result
end


return bt_con_monomer