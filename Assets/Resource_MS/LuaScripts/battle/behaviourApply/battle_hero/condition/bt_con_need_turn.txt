---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by liuyubao.
--- DateTime: 2021/12/24 10:52
---判断技能 是不是因为控制 而导致不能释放
---@class bt_con_need_turn:ICondition
local bt_con_need_turn = SimpleClassUtil:class(ICondition)

function bt_con_need_turn:initData(data)

end
---@param blackBoard BlackBoard_BattleBase
---@param battleManager PVE_Config_Battle_Manager
function bt_con_need_turn:doCondition(blackBoard,agent)
    local result = Enum_BT.Node_ResultType.Fail
    if blackBoard._enmityIndex == 0 then
        result = Enum_BT.Node_ResultType.Fail
    else
        --- @type BattleEntityContext
        local _entityContext = agent._entityContext
        --- @type BattleCharacter
        local _enemyEntity = _entityContext:getEnemyEntityByIndex(blackBoard._campType,blackBoard._enmityIndex)
        if _enemyEntity  and _enemyEntity:getData()._alive == true and  _enemyEntity:getData()._isCanBeSelected == true then
            local self_pos = blackBoard._position
            local target =  _enemyEntity:getData()._position
            if (self_pos.x > target.x and blackBoard._orientation == Enum_Battle.Orientation.Right)
                    or (self_pos.x < target.x and blackBoard._orientation == Enum_Battle.Orientation.Left) then
                result = Enum_BT.Node_ResultType.Success
            end
        end
    end
    return result
end


return bt_con_need_turn