---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by liuyubao.
--- DateTime: 2021/12/6 18:06
---
---@class BattleLoaderManager:SimpleClassUtil
local BattleLoaderManager = SimpleClassUtil:class()

function BattleLoaderManager:initialize()
    self._list_asset = {}
end

function BattleLoaderManager:loadAssetAsync(assetName,assetType,cb)
    if assetType == Enum_Battle.BattleAssetType.Scene then
        LC.LoadAsset(assetName,function(sceneObject)
            if cb then
                cb(sceneObject)
            end
        end)
    elseif assetType == Enum_Battle.BattleAssetType.Model then
        LC.LoadAsset(assetName,function(sceneObject)
            if cb then
                cb(sceneObject)
            end
        end)
    elseif assetType == Enum_Battle.BattleAssetType.Effect then
        LC.LoadAsset(assetName,function(sceneObject)
            if cb then
                cb(sceneObject)
            end
        end)
    else
        BattleLog.error("未处理资源类型 ：" ,tostring(assetType))
    end


end

function BattleLoaderManager:pop(assetName,assetType,cb)
    if self._list_asset[assetType] == nil then
        self._list_asset[assetType] = {}
    end
    if self._list_asset[assetType][assetName] then
        if #self._list_asset[assetType][assetName] > 0 then
            local asset = table.remove(self._list_asset[assetType][assetName])
            if cb then
                cb(asset)
            end
        else
            self:loadAssetAsync(assetName,assetType,cb)
        end
    else
        self._list_asset[assetType][assetName] = {}
        self:loadAssetAsync(assetName,assetType,cb)
    end
end

function BattleLoaderManager:put(assetName,assetType,asset)
    if self._list_asset[assetType][assetName]  then
        table.insert(self._list_asset[assetType][assetName],asset)
    else
        BattleLog.error("资源  没有 对应得池子 请查看 资源来源 assetType ==  ",assetType,"    assetName ==  ",assetName)
    end
end

return BattleLoaderManager