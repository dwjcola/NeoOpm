---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by liuyubao.
--- DateTime: 2021/12/17 17:40
---@class BattleProxy
local BattleProxy = {}

function BattleProxy:Init()
    self._battleTeamMap = {}
end

function BattleProxy:GetData()
    if self._data == nil then
        self._data = {  }
    end
    return  self._data
end

---进入战斗
---@param type Enum_Battle.BattleEntityType
function BattleProxy:EnterBattle(type,data)


    self._processTree = ProcessUtil:creatMainBattleProcessTree(type)
    self._processTree:setDelegate(function()  self:EndBattle() end)
    self._processTree:start()
end

---结束战斗
function BattleProxy:EndBattle()
    BattleLog.error(" ****** BattleProxy:EndBattle ****** ")
    self._data = nil

end
--- 退出战斗或者布阵
function BattleProxy:ExitBattle()
    self._processTree:exit()

    self:onClear()
end

function BattleProxy:OpenBattleMainView(param)
    LC.OpenUI("UIBattleMain",param)
end

function BattleProxy:setBattleTeamMap(battleTimes,team_self,team_enemy)
   self._battleTeamMap[battleTimes] = {
       team_self = team_self,
       team_enemy = team_enemy
   }
end

function BattleProxy:getBattleTeamMap(battleTimes)
    return self._battleTeamMap[battleTimes]
end

function BattleProxy:onClear()
    self._data = nil
    self._processTree = nil
end

function BattleProxy:sendMsg_getBattleData(userData)
    local requstMsg = {

    }
    RPCLUA.server_even.getBattleData(requstMsg,function(l,rep)
        local _userData = userData
        EventManager:Dispatch(EventType.Event_GetBattleData,rep,_userData)
    end,self)
end

function BattleProxy:onDestroy()

end

return BattleProxy

